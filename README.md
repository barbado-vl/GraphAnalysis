# GraphAnalysis

Причин создать это приложение две, и появились они практически одновременно. Первой – была необходимость написать какой-нибудь проект в рамках освоения навыков программирования и языка C#. Вторая – автоматизировать механические действия по анализу графиков движения цены финансовых инструментов, что должно освободить 70-80% времени затрачиваемого на данную деятельность. 

Функциональная задача, или бизнес-требования, или какие механические действия предстояло автоматизировать:
- 1. График разбить на пики – вывести разницу значений по шкале времени (это ось X) между точками образующими пик.
- 2. По точкам нужных пиков провести линии.
- 3. Вывести информацию о линиях, и, их расположении относительно других линий в момент касания её ценой (ось Y).

## Алгоритм-Инструкция
Развертывание функциональных задач в алгоритм из технических задачи, конкретных действий и элементов интерфейса.  
Напутствие. Я как заказчик, и как разработчик, четко понимаю какие действия, когда и зачем совершать. Я пытался ввести валидацию данных в рамках логики модели где только можно, т.к. это спасет меня самого от мисс-кликов и дополнительных разбирательств при работе с приложением. При нулевом результате действия читайте сообщение внизу окна. Загрузка нового изображения сбросит все совершенные действия.

### Слой «движка»
Пункт «График разбить на пики» подразумевает слой выше, в котором подымаются задачи технического плана. Я выбрал простой и универсальный способ с точки зрения своей ситуации: 
- a)	Загружать изображение графика в виде японский свечей в окно (движок WPF, Canvas).  
      Интерфейс -- меню File > New или горячие клавиши Ctrl+V.
- b)	Затем находить контуры (библиотека OpenCV).  
      Интерфейс -- левая боковая панель, кнопка FC.
- c)	Считаем пики.  
      Необходимо задать минимальный размер – поле ввода minP на боковой панели.  
      Интерфейс -- левая боковая панель, кнопка PK.  

### Слой ручной работы
Далее можно заметить, что между пунктами «График разбить на пики» и «По точкам нужных пиков провести линии» есть пробел, он маркируется словом «нужных». Т.е. подразумевается слой из ряда дополнительных задач, которые должен совершить сам пользователь.  
Задачи:
- Удалить лишние контуры
- Редактирование пиков, что включает создание пиков и добавление/удаление точек по выделенным свечкам
- Бизнес-модель подразумевает введение фильтра линий, который бы четко задавал контуры зоны, внутри которой будут рассчитаны линии.
- Выделение нужных точек
- Часть действия требуют проверки данных. Например, свечки расчета линий должны представлять собой точки пиков.  

Для решения данных задач реализован следующий функционал:
- Выделение объектов – ЛКМ по объекту.
- Снятие выделения –ЛКМ по объекту (снятие выделения со всех объектов: горячая клавиша U или кнопка на боковой панели Us)
- Удаление объекта -- клавишу Delete или меню Edit > Delete
- Редактирование объекта – ПКМ по Выделенному объекту и выбор действия из всплывающего меню. Плюс использовать поле ввода Input на верхней панели справа в углу.
- Горизонтальная граница фильтра линий– выделить пик > ПКМ > кнопку меню Zone 13/14.
- Направление расчета относительно границы -- поле ввода Up/Dn на боковой панели, где необходимо ввести Up или Dn.
- Информирование пользователя о результате действия – сообщения выводятся в панель внизу окна
- Точки для расчет линий выделяются в ручную (ЛКМ по объекту), либо по кнопке SP на боковой панели, либо через меню по ПКМ по цифре представляющей пик.

Плюс реализован zoom и возможность двигать изображение.

### Финиш
Пункт «Вывести информацию о линиях».  
- Рассчитать линии по выделенным точками -- левая боковая панель, кнопка TL.
- Вывести Запись с информацией.  
Предварительно требуется выделить одну свечку, которая задаст координату по оси X длz расчета записи.  
Расчет записи – левая боковая панель, кнопка RE.

## Рефлексия
… Чистого MVVM не вышло.  
… Улучшать интерфейс можно вечно.  
… Расширение функционала требует дополнительных затрат времени.



